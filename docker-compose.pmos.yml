version: "3.9"

services:
  pmos:
    build:
      context: .
      dockerfile: Dockerfile.pmos
    environment:
      PMOS_PORT: "10001"
      PMOS_HOST: "0.0.0.0"
      PMOS_DB_PATH: "/data/pmos-data.json"
      BCGPT_URL: "${BCGPT_URL:-https://bcgpt.wickedlab.io}"
      BCGPT_API_KEY: "${BCGPT_API_KEY:-}"
      FLOW_URL: "${FLOW_URL:-https://flow.wickedlab.io}"
      PMOS_SHELL_TOKEN: "${PMOS_SHELL_TOKEN:-}"
      LOG_LEVEL: "${LOG_LEVEL:-info}"
    volumes:
      - pmos-data:/data
    expose:
      - "10001"
    restart: unless-stopped

volumes:
  pmos-data:
    driver: local
